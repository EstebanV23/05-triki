var m=Object.defineProperty;var f=(r,e,t)=>e in r?m(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var a=(r,e,t)=>(f(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function p(r,e){let t=0,i=0;return r.map(n=>{const s=`<div class="space-game" data-position-grid="${t}, ${i}"></div>`;return i++,i>e-1&&(t++,i=0),s})}function u(r,e,t){document.querySelectorAll(".space-game").forEach(i=>{i.dataset.positionGrid===`${r}, ${e}`&&(i.innerHTML=t)})}function g(r){if(r){const e=document.getElementById("winner");e.innerHTML=r,e.classList.add("view")}}class y{constructor(e){a(this,"valuesCorrects",["O","X"]);this.gameSpace=[];for(let t=0;t<e;t++)this.gameSpace[t]=new Array(e).fill("")}isEmpty(e,t){const i=this.gameSpace[e][t];if(i===void 0)throw new Error("The cell selected not found");return i===""}findWinner(){const e={rowsCells:[],columnsCells:[],diagonalCells:[]},t=this.gameSpace.length-1;for(let n=0;n<=t;n++){const s=[],o=[];e.rowsCells.push(this.gameSpace[n]);for(let l=0;l<=t;l++)s.push(this.gameSpace[l][n]),e.diagonalCells.length===0?o.push(this.gameSpace[l][l]):o.push(this.gameSpace[l][t-l]);e.diagonalCells.push(o),e.columnsCells.push(s)}const i=Object.values(e).flat(1).map(n=>this.winnerInline(n));return i.every(n=>n===0)&&this.endGame()?"Draw":i.some(n=>n===1)?"You Won":i.some(n=>n===-1)?"Bot Won":"Continue"}winnerInline(e){let t="",i=1;for(const n of e)n!==""&&(t===n?i++:(i=1,t=n));return i<3?0:t==="X"?1:-1}endGame(){for(const e of this.gameSpace)if(e.some(i=>i===""))return!1;return!0}verifyCorrectValue(e){return this.valuesCorrects.includes(e)}insertValueCell(e,t,i){if(!this.isEmpty(e,t))return!1;if(!this.verifyCorrectValue(i))throw new Error("The value is not correct");return this.gameSpace[e][t]=i,this.findWinner()}}class v{constructor(e,t){a(this,"defaultValue","O");this.max=e-1,this.min=0,this.triki=t}makeMove(e,t){return this.triki.insertValueCell(e,t,this.defaultValue)}generatePositions(){const e=Math.round(Math.random()*(this.max-this.min)+this.min),t=Math.round(Math.random()*(this.max-this.min)+this.min);return{positionX:e,positionY:t}}generateTurn(e){if(e)return;let t,i,n;do i=this.generatePositions().positionX,n=this.generatePositions().positionY,t=this.makeMove(i,n);while(!t);return u(i,n,this.defaultValue),t}}class w{constructor(e){a(this,"defaultValue","X");this.triki=e}generateMakeMove(e,t){return this.triki.insertValueCell(e,t,this.defaultValue)}}class k{constructor(e){a(this,"turn",1);a(this,"gameEnd","");this.triki=new y(e),this.bot=new v(e,this.triki),this.person=new w(this.triki)}generateMoveTurn(e,t){if(this.gameEnd)return;const i=this.person.generateMakeMove(e,t);if(!i)return;u(e,t,this.person.defaultValue),this.gameFinished(i);const n=this.bot.generateTurn(this.gameEnd);this.gameEnd||this.gameFinished(n)}gameFinished(e){e!=="Continue"&&(this.gameEnd=e)}}const d=3,C=r=>document.querySelectorAll(r),c=r=>document.querySelector(r);c("#winner");const E=()=>{const r=new k(d);return{triki:r.triki.gameSpace,game:r}},h=()=>{const{triki:r,game:e}=E(),t=r.flat(),i=p(t,d).join("");c("#app").innerHTML=i,L(e)},L=r=>{C(".space-game").forEach(e=>{e.addEventListener("click",()=>{const[t,i]=e.dataset.positionGrid.split(", ");r.generateMoveTurn(t,i),g(r.gameEnd)})})};c("#restartGame").addEventListener("click",()=>{c("#winner").classList.remove("view"),h()});h();
